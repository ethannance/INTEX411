@{
    ViewData["Title"] = "All Products";
}

@model ProductDetailsViewModel

<vc:nav-bar-types user="Admin"></vc:nav-bar-types>
<vc:submenu-types view="Default"></vc:submenu-types>

<div class="container-fluid">
    <div class="text-center">
        <a class="btn btn-primary btn-xl" asp-controller="Home" asp-action="ProductsAddAdmin">
            Add Product
        </a>
    </div>
    <br />
    <table class="table table-bordered">
        <thead>
            <td>Name</td>
            <td>Year</td>
            <td>Price</td>
            <td>Link</td>
            <td>Colors</td>
            <td>Category</td>
            <td>Edit/Delete</td>
        </thead>
        <tbody>
            @* @foreach (Product p in Model.Products)
            {
                <tr>@p.name</tr>
                <tr>@p.year</tr>
                <tr>@p.price</tr>
                <tr>@p.img_link</tr>
                <tr>@p.primary_color / @p.secondary_color</tr>
                <tr>@p.category</tr>
                <a class="btn btn-info" asp-controller="Home" asp-action="EditProduct">Edit</a>
                <a class="btn btn-danger" asp-controller="Home" asp-action="DeleteProduct">Delete</a>
            } *@
        </tbody>
    </table>
</div>
@* <div class="container-fluid">
    <br />
    <div class="row">
        <!-- Sidebar with product types -->
        <br />
        <br />
        <br />
        <br />
        <div class="col-md-3">
            <br />
            <br />
            <br />
            <br />
            @await Component.InvokeAsync("ProductTypes")
        </div>

        <!-- Main content area for products -->
        <div class="col-md-9">

            <form method="get" action="/Home/Index">
                <select name="pageSize" onchange="this.form.submit()">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                </select>
                <input type="hidden" name="pageNum" value="@Model.PaginationInfo.CurrentPage" />
                <input type="hidden" name="productType" value="@Model.CurrentProductType" />
            </form>

            @{
                var displayedNames = new HashSet<string>();
            }
            <div class="card-container">
                @foreach (Product p in Model.Products)
                {
                    if (displayedNames.Add(p.name)) // Only displays the product if its name is unique so far
                    {
                        <div class="card m-1 p-1 bg-light">
                            <partial name="ProductSummary" model="p" />
                        </div>
                    }
                }
            </div>
            

            <!-- Pagination tag helpers here -->
            <div page-model="@Model.PaginationInfo" page-action="Index" page-classes-enabled="true" page-class="btn"
                 page-class-normal="btn-outline-dark" page-class-selected="btn-primary"
                 page-url-productType="@Model.CurrentProductType" page-url-pageSize="@Model.PaginationInfo.ItemsPerPage" class="btn-group pull-right m-1">
            </div>

        </div>
    </div>
</div> *@

